<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
  <link rel="shortcut icon" type="image/x-icon" href="https://github.com/favicon.ico">

  <title>Do I Need to test my code?</title>

  <meta name="author" content="Josemy Duarte" />

  
  <meta name="description" content="What should I test?">
  

  <link rel="alternate" type="application/rss+xml" title="Josemy says... - Tecnología, Programación and others..." href="https://josemyduarte.github.io/feed.xml" />

  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-67420525-2"></script>
    <script>
          window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-67420525-2');
</script>


  

  


  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />


    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Do I Need to test my code?" />
  

   
  <meta property="og:description" content="What should I test?">
  


  <meta property="og:type" content="article" />
  <meta property="og:locale" content="es_ES" />
  <meta property="og:site_name" content="Josemy says..." />

  
  <meta property="og:url" content="https://josemyduarte.github.io/2019-07-20-do-i-need-to-test-my-code/" />
  <link rel="canonical" href="https://josemyduarte.github.io/2019-07-20-do-i-need-to-test-my-code/" />
  

  
  <meta property="og:image" content="/img/test.jpeg" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Do I Need to test my code?" />
  

  
  <meta name="twitter:description" content="What should I test?">
  

  
  <meta name="twitter:image" content="https://josemyduarte.github.io/img/test.jpeg" />
  
  
  


  

  

</head>


  <body>

    

  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button><a class="navbar-brand" href="https://josemyduarte.github.io/">Josemy says...</a></div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
          <li><a href="/articles">Read later</a></li>
          <li><a href="/books">Books</a></li>
          <li><a href="/aboutme">About Me</a></li></ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="https://josemyduarte.github.io/">
	      <img class="avatar-img" src="/img/test.jpeg" />
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>Do I Need to test my code?</h1>
		  
		    
			<h2 class="post-subheading">What should I test?</h2>
			
		  
		  
		  
		  <span class="post-meta">Posted on July 20, 2019</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      

      <article role="main" class="blog-post">
        <p>It is difficult to find any developer who does not agree with the title of this publication, even more, if asked in a job interview. Although, some developers took what Kent Beck once said <a href="https://stackoverflow.com/questions/153234/how-deep-are-your-unit-tests/153565#153565">“I get paid for <strong>code that works</strong>, not for tests”</a> as a license to not test your code. I think we should take his words with special care. He did not mean that you should not develop tests because you are not paid for that, but you must concentrate on your production code.</p>

<p>Now, if the title question creates debate, the subtitle is worse.  I know of companies that do not care at all about test coverage, others that think anything below 90% is bad. So, <em>how much testing is enough?</em></p>

<h2 id="do-i-need-100-coverage">Do I need 100% Coverage?</h2>

<p>Continuing with the quotes of Kent Beck, I would like to bring one of your tweets on this topic:</p>

<blockquote>
  <p>Being proud of 100% test coverage is like being proud of reading every word in the newspaper. Some are more important than others.</p>

  <p>–Kent Beck (@KentBeck) <a href="https://twitter.com/kentbeck/status/812703192437981184">Dec 24, 2016</a></p>
</blockquote>

<p>Also, as pointed in his book <a href="https://www.amazon.com/dp/0201616416/">Extreme Programming Explained: Embrace Change</a>:</p>

<blockquote>
  <p>It is impossible to test absolutely everything, without the tests being as complicated and error-prone as the code.</p>
</blockquote>

<p>Testing everything will probably lead you to perform non-orthogonal tests, which increases the likelihood that when you make a small change in your code, thousands of tests will be broken. Then, you spend more time fixing tests than creating <strong>code that works</strong>.</p>

<p>When making small changes causes many tests to break, developers are afraid to make changes because each time this happens they feel frustrated and unproductive. If we take into consideration that one of the reasons for testing is to feel safe when making changes to the production code, then we can agree that there is something wrong with the equation.</p>

<p>So, no, I don’t think you need 100% coverage. I know that is a controversial statement, there are some good reasons to argue the contrary, but I think that the pros of that aren’t enough to aim for a 100% coverage.</p>

<h2 id="what-is-not-a-unit-test">What is (not) a Unit Test?</h2>

<p>Sometimes is easier to define something by saying what is NOT, and Michael Feathers can help us with that. For him <a href="https://www.artima.com/weblogs/viewpost.jsp?thread=126923">a test is not a unit test if:</a></p>

<blockquote>
  <p>It talks to the database
It communicates across the network
It touches the file system
It can’t run at the same time as any of your other unit tests
You have to do special things to your environment (such as editing config files) to run it.</p>
</blockquote>

<p>You might ask: Why? Well, mainly because tests that do that sort of thing are generally slow and cause unstable tests. The idea of tests is to give you quick feedback on your code; If something broke or if you have the desired behavior; If you have tests that work sometimes and fail other times without obvious reasons, you will lose confidence in your tests, ignore them because “it is normal for these tests to fail”.</p>

<p>Finally, unit tests must be quick, they are designed to give you quick feedback. You should not have to think twice before executing them. If they are slow, they lose their reason. Developers will not execute them so often, they will avoid wasting that time.</p>

<h2 id="should-i-test-third-party-libraries">Should I test third-party libraries?</h2>

<p>Well, if you do it, for sure it won’t be an easy task. Steve Freeman in his book <a href="https://www.amazon.es/Growing-Object-Oriented-Software-Guided-Signature/dp/0321503627">Growing Object-Oriented Software, Guided by Tests</a> has a couple of good arguments to persuade you to avoid it:</p>

<blockquote>
  <p>Depending on the quality of the library might be hard to get the right state to be able to test it.</p>
</blockquote>

<p>When you use a third-party library, you must adapt to its design implementation. You gain the value of what they provide but lose some freedom in the implementation. Sometimes, that design is not easy to test and will require a lot of work just to establish the correct state to be able to test it. Also, you have to deal with the second point:</p>

<blockquote>
  <p>Pain to keep test up to date with upgrades to the library.</p>
</blockquote>

<p>Even if you are using an open-source library and can redefine the API to facilitate testing and use for your purpose, you will have to spend some time each time a library update is required.</p>

<p>So, what should we do? No tests at all? No. Define an adapter, test the adapter. We test these adapters with focused integration tests to confirm our understanding of how the third-party API works.</p>

<p>There are some exceptions where mocking third-party libraries can be helpful. We might use mocks to simulate behavior that is hard to trigger with the real library, such as throwing exceptions. Similarly, we might use mocks to test a sequence of calls, for example making sure that a transaction is rolled back if there’s a failure.</p>

<h2 id="testing-private-methods">Testing private methods</h2>

<p>In <a href="https://www.amazon.es/Pragmatic-Unit-Testing-Junit-Programmers/dp/0974514012">Pragmatic Unit Testing</a>, Dave Thomas and Andy Hunt write:</p>

<blockquote>
  <p>Most of the time, you should be able to test a class by exercising its public methods. If there is significant functionality that is hidden behind private or protected access, that might be a warning sign that there’s another class in there struggling to get out.</p>
</blockquote>

<p>A private method usually is an implementation detail. Testing implementation details is not good for your health. Usually causes that when you do a small refactor many tests fails. You should be able to test your classes trough its public methods.</p>

<h2 id="testing-implementation-details">Testing implementation Details</h2>

<p>Programmer tests should be sensitive to behavior changes and insensitive to structural changes. You write a new test when you need to fulfill a new requirement, no because you created a new method or class. That means that you should not write a new test just because you refactored the code, a refactor is a structural change, hence the behavior should remain the same.</p>

<p>When you test implementation details instead of behavior there are a couple of things that can go wrong:</p>

<ul>
  <li>Break when you refactor application code.  <strong>False negatives</strong></li>
  <li>Not fail when you break application code.  <strong>False positives</strong></li>
</ul>

<p>The first one, because your test is highly coupled to the structure of your application code. The second one, because of you are testing structure, not behavior.</p>

<p>To put closure on this subject I would like to quoute Ryan Fynke. In <a href="https://teamgaslight.com/blog/testing-behavior-vs-testing-implementation">his article</a> he found an elegant way to put the difference between testing implementation details and behavior:</p>

<blockquote>
  <h3 id="when-i-test-for-behavior-im-saying">When I test for behavior, I’m saying:</h3>
  <p>“I don’t care how you come up with the answer, just make sure that the answer is correct under this set of circumstances”</p>
  <h3 id="when-i-test-for-implementation-im-saying">When I test for implementation, I’m saying:</h3>
  <p>“I don’t care what the answer is, just make sure you do this thing while figuring it out.”</p>
</blockquote>

<p>PD: Just for fun, read <a href="http://edw519.posthaven.com/it-takes-6-days-to-change-1-line-of-code">this</a> story.</p>

      </article>

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#tests">tests</a>
          
            <a href="/tags#notes">notes</a>
          
          
        </div>
      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a href="https://twitter.com/intent/tweet?text=Do+I+Need+to+test+my+code%3F - &url=https%3A%2F%2Fjosemyduarte.github.io%2F2019-07-20-do-i-need-to-test-my-code%2F&via=&related="
      class="btn btn-social-icon btn-twitter" target="_blank" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
  <!--- Share on Facebook -->
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjosemyduarte.github.io%2F2019-07-20-do-i-need-to-test-my-code%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fa fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
  <!--- Share on LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fjosemyduarte.github.io%2F2019-07-20-do-i-need-to-test-my-code%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fa fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

</section>



      

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/2019-07-05-responsabilities-of-a-software-architect/" data-toggle="tooltip" data-placement="top" title="Responsabilities of a Software Architect">&larr; Previous Post</a>
        </li>
        
        
      </ul>

      
        <div class="disqus-comments">
          
        </div>
          
        <div class="staticman-comments">
          

        </div>
        <div class="justcomments-comments">
          
        </div>
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:duartejosemy@gmail.com" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://github.com/josemyduarte" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/JosemyD" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li><li><a href="https://www.instagram.com/josemy.duarte" title="Instagram"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Instagram</span>
              </a>
            </li><li><a href="https://linkedin.com/in/josemyduarte" title="LinkedIn"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Josemy Duarte
      &nbsp;&bull;&nbsp;
      2019

      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
          document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/js/main.js"></script>
    
  


  
  </body>
</html>
